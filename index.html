<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Refyned Dashboard</title>
  <style>
    body { font-family: Arial; margin:0; padding:20px; background:#f5f5f5; }
    h1 { margin-bottom:20px; }
    #grid {
      display:grid;
      grid-template-columns: repeat(auto-fill, minmax(200px,1fr));
      gap:20px;
    }
    .card {
      background:white;
      padding:20px;
      border-radius:12px;
      box-shadow:0 2px 6px rgba(0,0,0,0.1);
      cursor:grab;
    }
    .card.dragging {
      opacity:0.4;
    }
  </style>
</head>
<body>
  <h1>Refyned Dashboard</h1>
  <button onclick="addCard()">Add Card</button>
  <div id="grid"></div>

<script>
let grid = document.getElementById('grid');

function addCard() {
  const card = document.createElement('div');
  card.className='card';
  card.draggable=true;
  card.textContent='New Card';
  enableDrag(card);
  grid.appendChild(card);
}

function enableDrag(card){
  card.addEventListener('dragstart', e=>{
    card.classList.add('dragging');
  });
  card.addEventListener('dragend', e=>{
    card.classList.remove('dragging');
  });
}

grid.addEventListener('dragover', e=>{
  e.preventDefault();
  const dragging=document.querySelector('.dragging');
  const afterElement=getDragAfterElement(grid, e.clientY);
  if(afterElement==null){
    grid.appendChild(dragging);
  } else {
    grid.insertBefore(dragging, afterElement);
  }
});

function getDragAfterElement(container, y){
  const elements=[...container.querySelectorAll('.card:not(.dragging)')];
  return elements.reduce((closest, child)=>{
    const box=child.getBoundingClientRect();
    const offset=y - box.top - box.height/2;
    if(offset < 0 && offset > closest.offset){
      return {offset: offset, element:child};
    } else {
      return closest;
    }
  }, {offset: Number.NEGATIVE_INFINITY}).element;
}

// Add starter cards
['Sales','Orders','Products'].forEach(title=>{
  const c=document.createElement('div');
  c.className='card';
  c.draggable=true;
  c.textContent=title;
  enableDrag(c);
  grid.appendChild(c);
});
</script>
</body>
</html>
